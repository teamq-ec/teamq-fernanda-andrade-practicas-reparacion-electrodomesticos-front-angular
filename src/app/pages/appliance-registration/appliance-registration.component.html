<body>
    <app-menu></app-menu>
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white shadow-lg rounded-lg w-full p-8" style="max-width: 90%">
            <form [formGroup]="form" (ngSubmit)="onSubmit()">
                <div>
                    <div class="absolute right-330 z-10" style="margin-top: 2px;">
                        <button (click)="goToHome()"
                            class="inline-flex items-center justify-center w-10 h-10 bg-indigo-600 rounded-md shadow-sm text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                            title="Go to Home">
                            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 19l-7-7 7-7"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="px-4 py-5 sm:px-6 border-b border-gray-200">

                        <h2 class="text-lg font-medium leading-6 text-gray-900" style="margin-top: 45px;">{{
                            'formProduct.APPLICANT_INFO_TITLE' | translate }}</h2>
                        <p class="mt-1 text-sm text-gray-600">{{ 'formProduct.APPLICANT_INFO_DESCRIPTION' | translate }}
                        </p>
                    </div>
                    <div class="mt-6">
                        <div class="grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-6">
                            <div class="space-y-6">
                                <h2 class="text-lg font-medium leading-6 text-gray-900">
                                    {{ "formProduct.APPLICANT_INFO_TITLE" | translate }}
                                </h2>
                                <p class="mt-1 text-sm text-gray-600">
                                    {{ "formProduct.APPLICANT_INFO_DESCRIPTION" | translate }}
                                </p>


                                <div class="sm:col-span-6">
                                    <label for="address" class="block text-sm font-medium leading-6 text-gray-900"> {{
                                        'formProduct.ADDRESS_LABEL' | translate }} <span
                                            class="text-red-500">*</span></label>
                                    <div class="mt-2">
                                        <input type="text" formControlName="address" id="address"
                                            autocomplete="street-address"
                                            class="block w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                            required [class.border-red-500]="isFieldInvalid('address')"
                                            placeholder="{{ 'formProduct.ADDRESS_LABEL' | translate }}">
                                    </div>
                                    <div
                                        *ngIf="form.get('address')?.invalid && (form.get('address')?.dirty || form.get('address')?.touched)">
                                        <div *ngIf="form.get('address')?.errors?.['required']"
                                            class="text-red-500 text-sm">{{
                                            'formProduct.ADDRESS_REQUIRED' | translate }}</div>
                                    </div>
                                </div>

                                <div>
                                    <label for="application_date"
                                        class="block text-sm font-medium leading-6 text-gray-900">
                                        {{ "formProduct.APPLICATION_DATE_LABEL" | translate }}
                                        <span class="text-red-500">*</span>
                                    </label>
                                    <div class="mt-1">
                                        <input id="application_date" formControlName="application_date"
                                            name="application_date" type="date" autocomplete="application_date" required
                                            [class.border-red-500]="isFieldInvalid('application_date')"
                                            class="block w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                            placeholder="Seleccione la fecha" />
                                    </div>
                                    <div *ngIf="
                        form.get('application_date')?.invalid &&
                        (form.get('application_date')?.dirty ||
                          form.get('application_date')?.touched)
                      ">
                                        <div *ngIf="form.get('application_date')?.errors?.['required']"
                                            class="text-red-500 text-sm">
                                            {{ "formProduct.APPLICATION_DATE_REQUIRED" | translate }}
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="space-y-6">
                                <h2 class="text-lg font-medium leading-6 text-gray-900" style="margin-top: 30px;">{{
                                    'formProduct.SERVICE_REQUEST_TITLE' | translate }}</h2>
                                <p class="mt-1 text-sm text-gray-600">{{ 'formProduct.SERVICE_REQUEST_DESCRIPTION' |
                                    translate }}</p>

                                <div class="sm:col-span-6">
                                    <label for="problem-details"
                                        class="block text-sm font-medium leading-6 text-gray-900">{{
                                        'formProduct.PROBLEM_DETAILS_LABEL' | translate }}<span
                                            class="text-red-500">*</span></label>
                                    <div class="mt-2">
                                        <textarea id="problem-details" formControlName="problem_details"
                                            name="problem-details" rows="3"
                                            class="block w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                            required [class.border-red-500]="isFieldInvalid('problem_details')"
                                            placeholder="{{ 'formProduct.PROBLEM_DETAILS_LABEL' | translate }}"></textarea>
                                    </div>
                                    <div
                                        *ngIf="form.get('problem_details')?.invalid && (form.get('problem_details')?.dirty || form.get('problem_details')?.touched)">
                                        <div *ngIf="form.get('problem_details')?.errors?.['required']"
                                            class="text-red-500 text-sm">{{
                                            'formProduct.PROBLEM_DETAILS_REQUIRED' | translate }}</div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">

                                    <div class="sm:col-span-3">
                                        <label for="appliance-type"
                                            class="block text-sm font-medium leading-6 text-gray-900">{{
                                            'formProduct.APPLIANCE_TYPE_LABEL' | translate }} <span
                                                class="text-red-500">*</span></label>
                                        <div class="mt-2">
                                            <select id="appliance-type" formControlName="appliance_type"
                                                name="appliance-type"
                                                class="block w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                                required [class.border-red-500]="isFieldInvalid('appliance_type')">
                                                <option value="">{{ 'formProduct.APPLIANCE_TYPE_PLACEHOLDER' | translate
                                                    }}</option>
                                                <option value="refrigerator">{{
                                                    'formProduct.APPLIANCE_TYPE_REFRIGERATOR' | translate }}</option>
                                                <option value="washer">{{ 'formProduct.APPLIANCE_TYPE_WASHER' |
                                                    translate }}</option>
                                                <option value="dryer">{{ 'formProduct.APPLIANCE_TYPE_DRYER' | translate
                                                    }}</option>
                                                <option value="oven">{{ 'formProduct.APPLIANCE_TYPE_OVEN' | translate }}
                                                </option>
                                            </select>
                                        </div>
                                        <div
                                            *ngIf="form.get('appliance_type')?.invalid && (form.get('appliance_type')?.dirty || form.get('appliance_type')?.touched)">
                                            <div *ngIf="form.get('appliance_type')?.errors?.['required']"
                                                class="text-red-500 text-sm">{{ 'formProduct.APPLIANCE_TYPE_REQUIRED' |
                                                translate }}</div>
                                        </div>
                                    </div>


                                    <div class="sm:col-span-3">
                                        <label for="brand" class="block text-sm font-medium leading-6 text-gray-900"> {{
                                            'formProduct.BRAND_LABEL'
                                            | translate }} <span class="text-red-500">*</span></label>
                                        <div class="mt-2">
                                            <select id="brand" formControlName="brand" name="brand"
                                                class="block w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                                required [class.border-red-500]="isFieldInvalid('brand')">
                                                <option value="">{{ 'formProduct.BRAND_PLACEHOLDER' | translate }}
                                                </option>
                                                <option>Samsung</option>
                                                <option>LG</option>
                                                <option>Whirlpool</option>
                                                <option>GE</option>
                                            </select>
                                        </div>
                                        <div
                                            *ngIf="form.get('brand')?.invalid && (form.get('brand')?.dirty || form.get('brand')?.touched)">
                                            <div *ngIf="form.get('brand')?.errors?.['required']"
                                                class="text-red-500 text-sm">{{
                                                'formProduct.BRAND_REQUIRED' | translate }}</div>
                                        </div>
                                    </div>


                                    <div class="sm:col-span-3">
                                        <label for="service-type"
                                            class="block text-sm font-medium leading-6 text-gray-900">{{
                                            'formProduct.SERVICE_TYPE_LABEL' | translate }} <span
                                                class="text-red-500">*</span></label>
                                        <div class="mt-2">
                                            <select id="service-type" formControlName="service_type" name="service-type"
                                                class="block w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                                required [class.border-red-500]="isFieldInvalid('service_type')">
                                                <option value="">{{ 'formProduct.SERVICE_TYPE_PLACEHOLDER' | translate
                                                    }}</option>
                                                <option value="repair">{{ 'formProduct.SERVICE_TYPE_REPAIR' | translate
                                                    }}</option>
                                                <option value="maintenance">{{ 'formProduct.SERVICE_TYPE_MAINTENANCE' |
                                                    translate }}</option>
                                            </select>
                                        </div>
                                        <div
                                            *ngIf="form.get('service_type')?.invalid && (form.get('service_type')?.dirty || form.get('service_type')?.touched)">
                                            <div *ngIf="form.get('service_type')?.errors?.['required']"
                                                class="text-red-500 text-sm">{{ 'formProduct.SERVICE_TYPE_REQUIRED' |
                                                translate }}</div>
                                        </div>
                                    </div>
                                    <div class="sm:col-span-3">
                                        <label for="preferred-contact-method"
                                            class="block text-sm font-medium leading-6 text-gray-900">{{
                                            'formProduct.PREFERRED_CONTACT_METHOD_LABEL' | translate }} <span
                                                class="text-red-500">*</span></label>
                                        <div class="mt-2">
                                            <select id="preferred-contact-method"
                                                formControlName="preferred_contact_method"
                                                name="preferred-contact-method"
                                                class="block w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                                required
                                                [class.border-red-500]="isFieldInvalid('preferred_contact_method')">
                                                <option value="">{{ 'formProduct.CONTACT_METHOD_PLACEHOLDER' | translate
                                                    }}</option>
                                                <option value="email">{{ 'formProduct.EMAIL' | translate }}</option>
                                                <option value="Celular">{{ 'formProduct.PHONE' | translate }}</option>
                                            </select>
                                        </div>
                                        <div
                                            *ngIf="form.get('preferred_contact_method')?.invalid && (form.get('preferred_contact_method')?.dirty || form.get('preferred_contact_method')?.touched)">
                                            <div *ngIf="form.get('preferred_contact_method')?.errors?.['required']"
                                                class="text-red-500 text-sm">
                                                {{ 'formProduct.PREFERRED_CONTACT_METHOD_REQUIRED' | translate }}</div>
                                        </div>
                                    </div>

                                    <div class="sm:col-span-3"
                                        *ngIf="form.get('preferred_contact_method')?.value === 'Celular'">
                                        <label for="phone_number"
                                            class="block text-sm font-medium leading-6 text-gray-900">
                                            {{ 'formProduct.PHONE_NUMBER_LABEL' | translate }} <span
                                                class="text-red-500">*</span>
                                        </label>
                                        <div class="mt-2 relative">
                                            <input id="phone_number" name="phone_number" type="tel"
                                                formControlName="phone_number"
                                                class="block w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                                                placeholder="(123) 456-7890" pattern="[0-9]*">
                                            <div
                                                *ngIf="form.get('phone_number')?.invalid && (form.get('phone_number')?.dirty || form.get('phone_number')?.touched)">
                                                <div *ngIf="form.get('phone_number')?.errors?.['required']"
                                                    class="text-red-500 text-sm">{{
                                                    'formProduct.STATE_REQUIRED' | translate }}</div>
                                                <div *ngIf="form.get('phone_number')?.errors?.['pattern']"
                                                    class="text-red-500 text-sm">{{
                                                    'formProduct.PHONE_NUMBER_PATTERN_ERROR' | translate }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="space-y-6">
                                <h3 class="text-lg font-medium leading-6 text-gray-900">{{
                                    'formProduct.APPLIANCE_IMAGE_LABEL' | translate
                                    }} <span class="text-red-500">*</span></h3>
                                <p class="mt-2 text-sm text-gray-600">{{ 'formProduct.APPLIANCE_IMAGE_DESCRIPTION' |
                                    translate }}</p>
                                <div class="image-upload">
                                    <div class="upload-area" *ngIf="!imageSrc">
                                        <label for="image-upload" class="image-upload-label">
                                            <div class="image-upload-placeholder">
                                                <svg class="upload-icon" viewBox="0 0 24 24" fill="currentColor"
                                                    aria-hidden="true">
                                                    <path d="M13 3h-2v6H7l5 5 5-5h-4V3z"></path>
                                                </svg>
                                                <p class="upload-text">{{ 'formProduct.UPLOAD_FILE_LABEL' | translate }}
                                                </p>
                                            </div>
                                            <input id="image-upload" type="file" accept="image/*"
                                                (change)="onFileChange($event)" />
                                        </label>
                                    </div>
                                    <div *ngIf="imageSrc" class="image-preview">
                                        <img [src]="imageSrc" alt="Imagen cargada" />
                                        <button type="button" class="remove-image" (click)="removeImage()">×</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end gap-4 mt-6">
                            <button type="button" class="text-sm font-semibold leading-6 text-gray-900"
                                (click)="cancel()">
                                {{ "formProduct.CANCEL_BUTTON" | translate }}
                            </button>
                            <button type="submit"
                                class="rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
                                {{ "formProduct.SUBMIT_BUTTON" | translate }}
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <app-footer></app-footer>
</body>

<div *ngIf="showAlert" class="fixed inset-0 flex items-center justify-center z-50">
    <app-alert-confirmation (alertClosed)="onAlertClosed()"></app-alert-confirmation>
</div>
